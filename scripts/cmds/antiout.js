module.exports = {
  config: {
    name: "antiout",
    version: "1.0",
    author: "BADHON",
    countDown: 5,
    role: 2,
    shortDescription: {
      en: "ğŸ›¡ï¸ ğ—£ğ—¥ğ—˜ğ—©ğ—˜ğ—¡ğ—§ ğ—¨ğ—¦ğ—˜ğ—¥ğ—¦ ğ—™ğ—¥ğ—¢ğ—  ğ—Ÿğ—˜ğ—”ğ—©ğ—œğ—¡ğ—š ğ—•ğ—”ğ——ğ—›ğ—¢ğ—¡'ğ—¦ ğ—šğ—¥ğ—¢ğ—¨ğ—£"
    },
    longDescription: {
      en: "âœ¨ ğ—˜ğ—¡ğ—”ğ—•ğ—Ÿğ—˜/ğ——ğ—œğ—¦ğ—”ğ—•ğ—Ÿğ—˜ ğ—”ğ—¡ğ—§ğ—œ-ğ—¢ğ—¨ğ—§ ğ—™ğ—˜ğ—”ğ—§ğ—¨ğ—¥ğ—˜ ğ—§ğ—¢ ğ—”ğ—¨ğ—§ğ—¢-ğ—¥ğ—˜ğ—”ğ——ğ—— ğ—¨ğ—¦ğ—˜ğ—¥ğ—¦ ğ—œğ—¡ ğ—•ğ—”ğ——ğ—›ğ—¢ğ—¡'ğ—¦ ğ—šğ—¥ğ—¢ğ—¨ğ—£"
    },
    category: "system",
    guide: {
      en: "ğŸ’¡ ğ—¨ğ—¦ğ—”ğ—šğ—˜: {ğ—½ğ—»} [ğ—¼ğ—»|ğ—¼ğ—³ğ—³] - ğ—§ğ—¨ğ—¥ğ—¡ ğ—”ğ—¡ğ—§ğ—œ-ğ—¢ğ—¨ğ—§ ğ—™ğ—˜ğ—”ğ—§ğ—¨ğ—¥ğ—˜ ğ—¢ğ—¡/ğ—¢ğ—™ğ—™"
    }
  },

  langs: {
    en: {
      turnedOn: "âœ… ğ—”ğ—¡ğ—§ğ—œ-ğ—¢ğ—¨ğ—§ ğ—™ğ—˜ğ—”ğ—§ğ—¨ğ—¥ğ—˜ ğ—›ğ—”ğ—¦ ğ—•ğ—˜ğ—˜ğ—¡ ğ—˜ğ—¡ğ—”ğ—•ğ—Ÿğ—˜ğ—— ğ—™ğ—¢ğ—¥ ğ—•ğ—”ğ——ğ—›ğ—¢ğ—¡'ğ—¦ ğ—šğ—¥ğ—¢ğ—¨ğ—£!",
      turnedOff: "âŒ ğ—”ğ—¡ğ—§ğ—œ-ğ—¢ğ—¨ğ—§ ğ—™ğ—˜ğ—”ğ—§ğ—¨ğ—¥ğ—˜ ğ—›ğ—”ğ—¦ ğ—•ğ—˜ğ—˜ğ—¡ ğ——ğ—œğ—¦ğ—”ğ—•ğ—Ÿğ—˜ğ—— ğ—™ğ—¢ğ—¥ ğ—•ğ—”ğ——ğ—›ğ—¢ğ—¡'ğ—¦ ğ—šğ—¥ğ—¢ğ—¨ğ—£!",
      missingPermission: "âš ï¸  ğ—¦ğ—¢ğ—¥ğ—¥ğ—¬ ğ—•ğ—”ğ——ğ—›ğ—¢ğ—¡! ğ—œ ğ—–ğ—¢ğ—¨ğ—Ÿğ——ğ—¡'ğ—§ ğ—”ğ——ğ—— %1 ğ—•ğ—”ğ—–ğ—.\nğ—§ğ—›ğ—˜ğ—¬ ğ— ğ—”ğ—¬ ğ—›ğ—”ğ—©ğ—˜ ğ—•ğ—Ÿğ—¢ğ—–ğ—ğ—˜ğ—— ğ— ğ—˜ ğ—¢ğ—¥ ğ——ğ—œğ—¦ğ—”ğ—•ğ—Ÿğ—˜ğ—— ğ— ğ—˜ğ—¦ğ—¦ğ—˜ğ—¡ğ—šğ—˜ğ—¥.",
      addedBack: "ğŸ”  ğ—›ğ—˜ğ—¬ %1!\nğ—¬ğ—¢ğ—¨'ğ—¥ğ—˜ ğ—¡ğ—¢ğ—§ ğ—”ğ—Ÿğ—Ÿğ—¢ğ—ªğ—˜ğ—— ğ—§ğ—¢ ğ—Ÿğ—˜ğ—”ğ—©ğ—˜ ğ—•ğ—”ğ——ğ—›ğ—¢ğ—¡'ğ—¦ ğ—šğ—¥ğ—¢ğ—¨ğ—£!\nğ—¢ğ—¡ğ—Ÿğ—¬ ğ—•ğ—”ğ——ğ—›ğ—¢ğ—¡ ğ—–ğ—”ğ—¡ ğ—šğ—œğ—©ğ—˜ ğ—£ğ—˜ğ—¥ğ— ğ—œğ—¦ğ—¦ğ—œğ—¢ğ—¡ ğ—§ğ—¢ ğ—Ÿğ—˜ğ—”ğ—©ğ—˜!"
    }
  },

  onStart: async function ({ args, message, event, threadsData, getLang }) {
    if (args[0] === "on") {
      await threadsData.set(event.threadID, true, "data.antiout");
      return message.reply(getLang("turnedOn"));
    } 
    if (args[0] === "off") {
      await threadsData.set(event.threadID, false, "data.antiout");
      return message.reply(getLang("turnedOff"));
    }
    return message.reply("â“  ğ—£ğ—Ÿğ—˜ğ—”ğ—¦ğ—˜ ğ—¦ğ—£ğ—˜ğ—–ğ—œğ—™ğ—¬ 'ğ—¢ğ—¡' ğ—¢ğ—¥ 'ğ—¢ğ—™ğ—™' ğ—§ğ—¢ ğ—–ğ—¢ğ—¡ğ—§ğ—¥ğ—¢ğ—Ÿ ğ—•ğ—”ğ——ğ—›ğ—¢ğ—¡'ğ—¦ ğ—”ğ—¡ğ—§ğ—œ-ğ—¢ğ—¨ğ—§ ğ—¦ğ—¬ğ—¦ğ—§ğ—˜ğ— .");
  },

  onEvent: async function ({ event, api, threadsData, usersData, getLang }) {
    if (event.logMessageType !== "log:unsubscribe") return;

    const antiout = await threadsData.get(event.threadID, "data.antiout");
    if (!antiout) return;

    if (event.logMessageData.leftParticipantFbId === api.getCurrentUserID()) return;

    const name = await usersData.getName(event.logMessageData.leftParticipantFbId);

    try {
      await api.addUserToGroup(event.logMessageData.leftParticipantFbId, event.threadID);
      api.sendMessage(getLang("addedBack", name), event.threadID);
    } catch (err) {
      api.sendMessage(getLang("missingPermission", name), event.threadID);
    }
  }
};
